<header class="navbar" (mouseenter)="onMouseEnter()" (mouseleave)="onMouseLeave()">
  <div class="nav-left">
      <button class="hamburger" (click)="toggleMenu()">
          <span class="bar"></span>
          <span class="bar"></span>
          <span class="bar"></span>
      </button>
      <div class="pokedex-brand">
          <div class="blue-light"></div>
          <span>POK√âDEX</span>
      </div>
  </div>

  <div class="search-wrapper" *ngIf="activeView === 'inicio'">
      <div class="search-group">
          
          <select [(ngModel)]="selectedGeneration" (change)="onFilterChange()" class="filter-select">
              <option value="">Gen: Todas</option>
              <option *ngFor="let gen of generations" [value]="gen.id">{{ gen.name }}</option>
          </select>
  
          <select [(ngModel)]="selectedType" (change)="onFilterChange()" class="filter-select">
              <option value="">Tipo: Todos</option>
              <option *ngFor="let type of pokemonTypes" [value]="type.name">{{ type.name | titlecase }}</option>
          </select>
  
          <div class="search-box">
              <input 
                  type="text" 
                  [(ngModel)]="searchTerm" 
                  (keyup.enter)="searchPokemon()"
                  placeholder="Nombre o ID" 
              />
              <button (click)="searchPokemon()">
                  <i class="search-icon">üîç</i>
              </button>
          </div>
  
      </div>
  </div>

  <nav class="nav-menu" [class.active]="menuActive">
      <ul>
          <li [class.active-link]="activeView === 'inicio'">
              <button (click)="setActiveView('inicio'); toggleMenu()">Inicio</button>
          </li>
          <li [class.active-link]="activeView === 'detalle'">
              <button (click)="setActiveView('detalle'); toggleMenu()">Detalle</button>
          </li>
          <li [class.active-link]="activeView === 'capturar'">
              <button (click)="setActiveView('capturar'); toggleMenu()">Capturar</button>
          </li>
          <li [class.active-link]="activeView === 'inventario'">
              <button (click)="setActiveView('inventario'); toggleMenu()">Inventario</button>
          </li>
      </ul>
  </nav>
</header>

<main id="main-container">

  <div id="cards-container" *ngIf="activeView === 'inicio'" #cards (scroll)="onScroll($event)">
      <app-card-pokemon 
          *ngFor="let pokemon of pokemonList"
          [data]="pokemon"
          [selected]="pokemon.name === selectedPokemon?.name"
          (clicked)="clickedCard($event)"
      ></app-card-pokemon>
      
      <div class="spinner-container" *ngIf="loading">
          <img src="../../../assets/img/spinner.svg" alt="Cargando..." class="spinner">
      </div>
  </div>

  <div class="view-container detail-view" *ngIf="activeView === 'detalle'">
      <app-photo-pokemon
          [pokemon]="selectedPokemon"
          [ngClass]="{openned: detail}"
      ></app-photo-pokemon>
      <app-detail-pokemon
          [pokemon]="selectedPokemon"
          (clicker)="changeStateDetail()"
          [openned]="detail"
          [ngClass]="{openned: detail}"
      ></app-detail-pokemon>
  </div>

  <div class="view-container catch-view" *ngIf="activeView === 'capturar'">
      <app-catching-pokemon></app-catching-pokemon>
  </div>

  <div class="view-container inventory-view" *ngIf="activeView === 'inventario'">
      <app-inventary-pokemon></app-inventary-pokemon>
  </div>

</main>